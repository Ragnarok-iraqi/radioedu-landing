<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RadioEdu AI | Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ù‡Ù†Ø§</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --bg: linear-gradient(135deg, #0f2027, #2c5364);
            --neon: #00d4ff;
            --glass: rgba(255, 255, 255, 0.05);
        }
        body {
            background: var(--bg); color: white; font-family: 'Cairo', sans-serif;
            margin: 0; min-height: 100vh; display: flex; align-items: center; justify-content: center;
        }
        .container {
            width: 90%; max-width: 500px; padding: 40px; border-radius: 30px;
            background: var(--glass); backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1); text-align: center;
        }
        .timer { display: flex; justify-content: center; gap: 15px; margin: 20px 0; }
        .time-box { background: rgba(0,0,0,0.3); padding: 10px; border-radius: 15px; min-width: 70px; }
        .time-box span { display: block; font-size: 24px; font-weight: 900; color: var(--neon); }
        input {
            width: 100%; padding: 15px; margin: 10px 0; border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05);
            color: white; outline: none; box-sizing: border-box;
        }
        button {
            width: 100%; padding: 15px; margin-top: 20px; border-radius: 50px;
            border: none; background: linear-gradient(90deg, #00d4ff, #00ff88);
            font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        button:disabled { opacity: 0.5; }
        #msg { margin-top: 15px; font-size: 14px; display: none; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="color: var(--neon)">RadioEdu AI</h2>
    <p>Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚:</p>
    
    <div class="timer">
        <div class="time-box"><span id="days">00</span>ÙŠÙˆÙ…</div>
        <div class="time-box"><span id="hours">00</span>Ø³Ø§Ø¹Ø©</div>
        <div class="time-box"><span id="mins">00</span>Ø¯Ù‚ÙŠÙ‚Ø©</div>
    </div>

    <form id="regForm">
        <input type="text" id="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
        <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *" required>
        <button type="submit" id="btn">Ø³Ø¬Ù„ Ø§Ù‡ØªÙ…Ø§Ù…Ùƒ Ø§Ù„Ø¢Ù†</button>
    </form>
    
    <div id="msg"></div>
    <p id="count" style="margin-top:20px; font-size:13px; opacity:0.7;"><i class="fas fa-users"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
</div>

<script>
    const SB_URL = 'https://vglgfwbwsupretmefybp.supabase.co';
    const SB_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZnbGdmd2J3c3VwcmV0mme mefybpiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczNTQzNTEsImV4cCI6MjA4MjkzMDM1MX0.7d3dc1P9_rApLP08V9Rv2tdbfMmyarfAv39m_WfAcfQ';
    const _sb = supabase.createClient(SB_URL, SB_KEY);

    // Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
    function updateTimer() {
        const target = new Date("2026-02-15T00:00:00").getTime(); // Ù…ÙˆØ¹Ø¯ Ø§ÙØªØ±Ø§Ø¶ÙŠ
        const now = new Date().getTime();
        const diff = target - now;
        if(diff < 0) return;
        document.getElementById('days').innerText = Math.floor(diff / (1000*60*60*24));
        document.getElementById('hours').innerText = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
        document.getElementById('mins').innerText = Math.floor((diff % (1000*60*60)) / (1000*60));
    }
    setInterval(updateTimer, 1000); updateTimer();

    // Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ø¯Ø¯
    async function getCount() {
        const { count } = await _sb.from('email_subscribers').select('*', { count: 'exact', head: true });
        document.getElementById('count').innerHTML = `<i class="fas fa-users"></i> Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ ${count || 0} Ø´Ø®Øµ`;
    }
    getCount();

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    document.getElementById('regForm').onsubmit = async (e) => {
        e.preventDefault();
        const btn = document.getElementById('btn');
        const msg = document.getElementById('msg');
        
        btn.disabled = true;
        msg.style.display = 'block';
        msg.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...";

        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;

        try {
            const { error } = await _sb.from('email_subscribers').insert([{ name, email, source: 'landing_page' }]);
            if (error) throw error;
            msg.style.color = "#00ff88";
            msg.innerText = "ØªÙ… ØªØ³Ø¬ÙŠÙ„Ùƒ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰";
            document.getElementById('regForm').reset();
            getCount();
        } catch (err) {
            msg.style.color = "#ff6b6b";
            msg.innerText = err.message.includes("duplicate") ? "Ù‡Ø°Ø§ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹" : "Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ø«Ø§Ù†ÙŠØ©";
        } finally {
            btn.disabled = false;
        }
    };
</script>
</body>
</html>
